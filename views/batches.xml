<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- Institute Batches -->

        <record id="gp_batch_form" model="ir.ui.view">
            <field name="name">institute.gp.batches.form</field>
            <field name="model">institute.gp.batches</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        
                        <!-- <button name="move_to_invoiced" string="Confirm" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '3-pending_invoice'),]}"/> -->
                        <!-- <button name="confirm_batch" string="Confirm" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '1-ongoing')]}"/>  -->
                        <!-- <button name="open_faculty_upload_wizard" type="object" string="Upload Faculty" class="btn-primary"/> -->
                        <!-- <button name="confirm_indos" string="Confirm Indos" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '2-indos_pending')]}"/> -->
                        <!-- <button name="register_for_exam" string="Register Exam" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '4-invoiced')]}"/> -->
                        <button name="open_register_for_exam_wizard" string="Register for Exam" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '4-invoiced')]}"/>
                        <button name="create_invoice" string="Create Invoice" type="object" class="btn-primary" attrs="{'invisible': [('create_invoice_button_invisible', '=', False)]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="1-ongoing,3-pending_invoice,4-invoiced,5-exam_scheduled,6-done"/>
                    </header>
                    <sheet>

                    
                        <div class="oe_button_box" name="button_box">
                            <button name="open_batch_candidate" string="Candidates" type="object" class="oe_stat_button" icon="fa-align-justify">
                            </button>
                            <button name="open_batch_faculty" string="Faculties" type="object" class="oe_stat_button" icon="fa-align-justify">
                            </button>
                        </div>
                        <group style="width:100%;">
                            <h1>
                                <field name="batch_name" placeholder="Batch Name"/>

                            </h1>
                        </group>
                        <group style="width:50%;">
                            <field name="dgs_batch"/>
                            <field name="institute_id" options="{'no_create':True}"/>
                            <field name="from_date"/>
                            <field name="to_date"/>
                            <field name="candidate_user_invoice_criteria" invisible="1"/>
                            <field name="all_invoice_generated" invisible="1"/>
                            
                        </group>
                        <!-- <group style="width:50%;">
                            <field name="course"/>
                        </group> -->
                        <group style="width:50%;">
                            <field name="account_move"/>
                            <field name="payment_state"/>
                            <field name="invoice_created" invisible="1"/>
                            <field name="create_invoice_button_invisible" invisible="1"/>
                        </group>

                        <group style="width:50%;">
                            <field name="candidate_count"/>
                            <field name="dgs_approved_capacity" readonly="1"/>
                        </group>

                        <group style="width:50%">
                            <field name="dgs_approval_state" readonly="0"/>
                            <field name="dgs_document"/>
                            <field name="active" invisible="1"/>
                            <!-- <field name="document_name" />
                            <field name="document_file" widget="binary" filename="documents_name"/> -->
                        </group>

                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name= "message_ids" widget="mail_thread"/>
                        <field name= "activity_ids" widget="mail_activity"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="institute_gpbatch_tree" model="ir.ui.view">
            <field name="name">institute.gp.batches.tree</field>
            <field name="model">institute.gp.batches</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="batch_name"/>
                    <field name="institute_id"/>
                    <field name="code"/>
                    <field name="exam_region"/>
                    <field name="from_date"/>
                    <field name="to_date"/>
                    <field name="dgs_approved_capacity" readonly="1"/>
                    <field name="candidate_count"/>
                    <!-- <field name="course"/> -->
                </tree>
            </field>
        </record>

        <record id="institute_gpbatch_search" model="ir.ui.view">
            <field name="name">institute.gp.batches.search</field>
            <field name="model">institute.gp.batches</field>
            <field name="arch" type="xml">
                <search>
                    <field name="batch_name"/>
                    <field name="dgs_batch"/>
                    <field name="institute_id"/>
                    <group expand="0" string="Group By">
                        <filter name="group_by_dgs_batch" string="DGS Batch" context="{'group_by':'dgs_batch'}" />
                        <filter name="group_by_exam_region" string="Exam Region" context="{'group_by':'exam_region'}" />
                        <!-- <filter name="" string="State" context="{'state':'exam_region'}" /> -->
                        <filter string="Invoice Pending" name="group_by_state" context="{'group_by':'state'}"  domain="[('state', '=', '3-pending_invoice')]"/>
                        <filter string="Paid" name="group_by_state" context="{'group_by':'state'}" domain="[('state', '=', '4-invoiced')]"/>

                    </group>

                    <searchpanel>
                        <field name="dgs_batch" enable_counters="1" icon="fa fa-user"/>
                        <field name="state" enable_counters="1" icon="fa fa-user"/>
                        <!-- <field name="institute_id" enable_counters="1"/> -->
                    </searchpanel>
                </search>
            </field>
        </record>
        
        <record id="gpbatch_form_kanban" model="ir.ui.view">
            <field name="name">institute.gp.batches.kanban</field>
            <field name="model">institute.gp.batches</field>
            <field name="arch" type="xml">
                <kanban disable_drag_drop_record="true" create="false" default_group_by="state">
                    <field name="state" readonly="1" />
                    <field name="batch_name"/>
                    <!-- <field name="candidate_count"/> -->
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <b>
                                    <strong class="o_kanban_record_title">
                                        <field name="batch_name"/>
                                    </strong>
                                </b>
                                <br/>
                                <field name="institute_id"/>
                                <br/>
                                <b>From: </b>
                                <field name="from_date"/>
                                <br/>
                                <b>To : </b>
                                <field name="to_date"/>
                                <br/>
                                <b>No of Candidate : </b>
                                <field name="candidate_count"/>
                                <br/>
                                <t t-if="record.state.raw_value === '3-pending_invoice' || record.state.raw_value === '4-invoiced'">
                                    <b>Invoice Status : </b>
                                    <field name="payment_state" decoration-success="payment_state == 'paid'" widget="badge" />
                                </t>
                                <!-- </t> -->
                                <!-- <br/>
                                <div class="o_kanban_record_bottom" t-if="!selection_mode">
                                  <div class="oe_kanban_bottom_left">
                                    <field name="activity_ids" widget="kanban_activity"/>
                                  </div>
                                </div> -->
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <!-- <record id="faculty_upload_wizard_view_form" model="ir.ui.view">
            <field name="name">Faculty Upload Wizard</field>
            <field name="model">faculty.upload.wizard</field>
            <field name="arch" type="xml">
                <form string="Upload Faculty">
                    <group>
                        <field name="faculty_file" filename="faculty_file_name"/>
                        <field name="faculty_file_name" invisible="1"/>
                    </group>
                    <footer>
                        <button name="action_upload_faculty" string="Upload" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <record id="action_faculty_upload_wizard" model="ir.actions.act_window">
            <field name="name">Upload Faculty</field>
            <field name="res_model">faculty.upload.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="context">{'default_batch_id': active_id}</field>
        </record> -->


        <record id="gpbatch_form_kanban_action" model="ir.actions.act_window">
            <field name="name">GP Batches</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">institute.gp.batches</field>
            <field name="view_mode">tree,kanban,form</field>
        </record>

        <record id="ccmc_batches_action" model="ir.actions.act_window">
            <field name="name">CCMC Batches</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">institute.ccmc.batches</field>
            <field name="view_mode">tree,kanban,form</field>
        </record>

        <record id="dgs_batch_action" model="ir.actions.act_window">
            <field name="name">DGS Batch</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">dgs.batches</field>
            <field name="view_mode">tree,form</field>
        </record>

        

        <!-- CCMC batches -->

        

        <record id="ccmc_batch_form" model="ir.ui.view">
            <field name="name">institute.ccmc.batches.form</field>
            <field name="model">institute.ccmc.batches</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <!-- <button name="move_to_invoiced_ccmc" string="Confirm" type="object" class="btn-primary" attrs="{'invisible': [('ccmc_state', '!=', '3-pending_invoice'),]}"/> -->
                        <button name="confirm_batch_ccmc" string="Confirm" type="object" class="btn-primary" attrs="{'invisible': [('ccmc_state', '!=', '1-ongoing')]}"/>
                        <!-- <button name="confirm_indos_ccmc" string="Confirm Indos" type="object" class="btn-primary" attrs="{'invisible': [('ccmc_state', '!=', '2-indos_pending')]}"/> -->
                        <button name="open_register_for_exam_wizard" string="Register for Exam" type="object" class="btn-primary" attrs="{'invisible': [('ccmc_state', '!=', '4-invoiced')]}"/>
                        <button name="create_invoice_ccmc" string="Create Invoice" type="object" class="btn-primary" attrs="{'invisible': [('ccmc_create_invoice_button_invisible', '=', False)]}"/>
                        <field name="ccmc_state" widget="statusbar"  statusbar_visible="1-ongoing,3-pending_invoice,4-invoiced,5-exam_scheduled,6-done"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="open_ccmc_batch_candidate" string="Candidates" type="object" class="oe_stat_button" icon="fa-align-justify">
                            </button>
                            <button name="open_ccmc_batch_faculty" string="Faculties" type="object" class="oe_stat_button" icon="fa-align-justify">
                            </button>
                        </div>
                        <group style="width:100%;">
                            <h1>
                                <field name="ccmc_batch_name" placeholder="Batch Name"/>

                            </h1>
                        </group>
                        <group style="width:50%;">
                            <field name="dgs_batch"/>
                            <field name="institute_id" options="{'no_create':True}"/>
                            <field name="ccmc_from_date"/>
                            <field name="ccmc_to_date"/>
                            <field name="candidate_user_invoice_criteria" invisible="1"/>
                            <field name="all_invoice_generated" invisible="1"/>
                        </group>
                        <!-- <group style="width:50%;">
                            <field name="course"/>
                        </group> -->
                        <group style="width:50%;">
                            <field name="ccmc_account_move"/>
                            <field name="payment_state"/>
                            <field name="ccmc_invoice_created" invisible="1"/>
                            <field name="ccmc_create_invoice_button_invisible" invisible="1"/>
                        </group>

                        <group style="width:50%;">
                            <field name="candidate_count"/>
                            <field name="dgs_approved_capacity" readonly="1"/>
                        </group>

                        <group style="width:50%">
                            <field name="dgs_approval_state" readonly="0"/>
                            <field name="dgs_document"/>
                            <field name="active" invisible="1"/>
                        </group>

                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name= "message_ids" widget="mail_thread"/>
                        <field name= "activity_ids" widget="mail_activity"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="ccmc_batch_form_kanban" model="ir.ui.view">
            <field name="name">institute.ccmc.batches.kanban</field>
            <field name="model">institute.ccmc.batches</field>
            <field name="arch" type="xml">
                <kanban disable_drag_drop_record="true" create="false" default_group_by="ccmc_state">
                    <field name="ccmc_state" readonly="1" />
                    <field name="ccmc_batch_name"/>
                    <!-- <field name="candidate_count"/> -->
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <b>
                                    <strong class="o_kanban_record_title">
                                        <field name="ccmc_batch_name"/>
                                    </strong>
                                </b>
                                <br/>
                                <field name="institute_id"/>
                                <br/>
                                <b>From: </b>
                                <field name="ccmc_from_date"/>
                                <br/>
                                <b>To : </b>
                                <field name="ccmc_to_date"/>
                                <br/>
                                <b>No of Candidate : </b>
                                <field name="ccmc_candidate_count"/>
                                <br/>
                                <t t-if="record.ccmc_state.raw_value === '3-pending_invoice' || record.ccmc_state.raw_value === '4-invoiced'">
                                    <b>Invoice Status : </b>
                                    <field name="payment_state" decoration-success="payment_state == 'paid'" widget="badge" />
                                </t>
                                
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="dgs_batch_form_kanban" model="ir.ui.view">
            <field name="name">dgs.batches.kanban</field>
            <field name="model">dgs.batches</field>
            <field name="arch" type="xml">
                <kanban disable_drag_drop_record="true" create="false" default_group_by="state">
                    <field name="batch_name"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <b>
                                    <strong class="o_kanban_record_title">
                                        <field name="batch_name"/>
                                    </strong>
                                </b>
                                
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="institute_ccmc_batch_tree" model="ir.ui.view">
            <field name="name">institute.ccmc.batches.tree</field>
            <field name="model">institute.ccmc.batches</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="ccmc_batch_name"/>
                    <field name="institute_id"/>
                    <field name="ccmc_from_date"/>
                    <field name="ccmc_to_date"/>
                    <field name="candidate_count"/>
                    <field name="dgs_approved_capacity" readonly="1"/>
                </tree>
            </field>
        </record>

        <record id="institute_ccmcbatch_search" model="ir.ui.view">
            <field name="name">institute.ccmc.batches.search</field>
            <field name="model">institute.ccmc.batches</field>
            <field name="arch" type="xml">
                
                <search>
                    <field name="ccmc_batch_name"/>
                    <field name="dgs_batch"/>
                    <field name="institute_id"/>
                    <group expand="0" string="Group By">
                        <filter name="group_by_dgs_batch" string="DGS Batch" context="{'group_by':'ccmc_batch_name'}" />
                    </group>
                    <searchpanel>
                        <field name="ccmc_state" enable_counters="1" icon="fa fa-user"/>
                        <field name="dgs_batch" enable_counters="1" icon="fa fa-user"/>
                        <!-- <field name="institute_id" enable_counters="1"/> -->
                    </searchpanel>
                </search>

            </field>
        </record>

        <record id="dgs_batch_tree" model="ir.ui.view">
            <field name="name">dgs.batches.tree</field>
            <field name="model">dgs.batches</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="batch_name"/>
                </tree>
            </field>
        </record>

        <record id="dgs_batch_form" model="ir.ui.view">
            <field name="name">dgs.batches.form</field>
            <field name="model">dgs.batches</field>
            <field name="arch" type="xml">
                <form>
                    <header>                        
                        <button name="print_gp_fresh" string="GP Fresh" type="object" class="btn-primary" />
                        <button name="print_gp_repeater" string="GP Repeater" type="object" class="btn-primary" />
                        
                        <button name="move_confirm" string="Process Marksheet" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '1-on_going')]}" />
                        <button name="move_dgs_approved" string="Approve Certificate" type="object" class="btn-primary" attrs="{'invisible': [('state', '!=', '2-confirmed')]}" />
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                         <div class="oe_button_box" name="button_box">
                            <button name="open_ccmc_exams" string="CCMC Exams" type="object" class="oe_stat_button" icon="fa-align-justify" >
                            </button>
                            <button name="open_gp_exams" string="GP Exams" type="object" class="oe_stat_button" icon="fa-align-justify" >
                            </button>
                        </div>
                        <group>
                            <field name="batch_name"/>
                            <field name="is_current_batch"/>
                            <field name="repeater_batch"/>
                            <field name="gp_url" attrs="{'invisible': [('repeater_batch', '=', False)]}"/>
                            <field name="ccmc_url" attrs="{'invisible': [('repeater_batch', '=', False)]}"/>
                            <field name="form_deadline" attrs="{'invisible': [('repeater_batch', '=', False)]}"/>
                            <field name="from_date"/>
                            <field name="to_date"/>
                        </group>
                        <group>
                            <field name="exam_pass_date"/>
                            <field name="certificate_issue_date"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name= "message_ids" widget="mail_thread"/>
                        <field name= "activity_ids" widget="mail_activity"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="ccmc_batch_form_kanban_action" model="ir.actions.act_window">
            <field name="name"> CCMC Batches</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">institute.ccmc.batches</field>
            <field name="view_mode">kanban,form,tree</field>

        </record>




        <!-- END  Institute Batches -->
        


        <record id="batches_gp_register_exam_wizard" model="ir.ui.view">
            <field name="name">batches.gp.register.exam.wizard.form</field>
            <field name="model">batches.gp.register.exam.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="institute_id" invisible="1"/>
                        <field name="batch_id" invisible="1"/>
                        <field name="dgs_batch" invisible="0"/>

                        <field name="mek_survey_qb" required="1" domain="[('template', '=', True ),('subject.name','=','MEK')]" options="{'no_create': True}"/>
                        <field name="gsk_survey_qb" required="1" domain="[('template', '=', True ),('subject.name','=','GSK')]" options="{'no_create': True}"/>

                    </group>
                    <footer>
                        <button string="Register" type="object" class="oe_highlight" name="register"/>
                        <button string="Cancel" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <record id="batches_ccmc_register_exam_wizard" model="ir.ui.view">
            <field name="name">batches.ccmc.register.exam.wizard.form</field>
            <field name="model">batches.ccmc.register.exam.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="institute_id" invisible="1"/>
                        <field name="batch_id" invisible="1"/>
                        <field name="cookery_bakery_qb" required="1" domain="[('template', '=', True ),('subject.name','=','CCMC')]" options="{'no_create': True}"/>
                    </group>
                    <footer>
                        <button string="Register" type="object" class="oe_highlight" name="register"/>
                        <!-- <button string="Cancel" class="oe_link" special="cancel"/> -->
                    </footer>
                </form>
            </field>
        </record>

        


    </data>
</odoo>