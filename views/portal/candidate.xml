<odoo>
    <template id="candidate_portal_mydetail" inherit_id="portal.portal_my_details">
        <xpath expr="//button[hasclass('btn-primary')]" position="replace">
            <t t-if="env.user.has_group('bes.group_gp_candidates') or env.user.has_group('bes.group_ccmc_candidates')">

            </t>
            <t t-else="">
                <button type="submit" class="btn btn-primary float-right mb32 ">
                    Confirm
                    <span class="fa fa-long-arrow-right" />
                </button>
            </t>
            
        </xpath>
    </template>

    <template id="candidate_portal_layout" inherit_id="portal.portal_layout">
        
        <xpath expr="//div[hasclass('o_portal_my_security')]" position="replace">
            <t t-if="env.user.has_group('bes.group_gp_candidates') or env.user.has_group('bes.group_ccmc_candidates')">

            </t>
            <t t-else="">
                <div class="o_portal_my_security mt-3">
                    <h4>Account Security </h4>
                    <hr class="mt-1 mb-1"/>
                    <a href="/my/security"><i class="fa fa-pencil mx-1"/>Edit Security Settings</a>
                </div>
            </t>
            
        </xpath>


         <xpath expr="//div[hasclass('o_portal_my_details')]" position="replace">
            <t t-if="env.user.has_group('bes.group_gp_candidates') or env.user.has_group('bes.group_ccmc_candidates')">
                <div class="o_portal_my_details">
                    <h4>Details <a role="button" href="/my/account" class="btn btn-sm btn-link"><i class="fa fa-pencil"/> Edit/View</a></h4>
                    <hr class="mt-1 mb-0"/>
                    <div t-field="user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/>
                </div>
            </t>
            <t t-else="">
                <div class="o_portal_my_details">
                    <h4>Details <a role="button" href="/my/account" class="btn btn-sm btn-link"><i class="fa fa-pencil"/> Edit</a></h4>
                    <hr class="mt-1 mb-0"/>
                    <div t-field="user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/>
                </div>
            </t>
            
        </xpath>
    

    </template>


    <!-- ccmc  -->
    <!-- <template id="candidate_portal_mydetail_ccmc" inherit_id="portal.portal_my_details">
        <xpath expr="//button[hasclass('btn-primary')]" position="replace">
            <t t-if="env.user.has_group('bes.group_ccmc_candidates')">

            </t>
            <t t-else="">
                <button type="submit" class="btn btn-primary float-right mb32 ">
                    Confirm
                    <span class="fa fa-long-arrow-right" />
                </button>
            </t>
            
        </xpath>
    </template>

    <template id="candidate_portal_layout_ccmc" inherit_id="portal.portal_layout">
        
        <xpath expr="//div[hasclass('o_portal_my_security')]" position="replace">
            <t t-if="env.user.has_group('bes.group_ccmc_candidates')">

            </t>
            <t t-else="">
                <div class="o_portal_my_security mt-3">
                    <h4>Account Security </h4>
                    <hr class="mt-1 mb-1"/>
                    <a href="/my/security"><i class="fa fa-pencil mx-1"/>Edit Security Settings</a>
                </div>
            </t>
            
        </xpath>


         <xpath expr="//div[hasclass('o_portal_my_details')]" position="replace">
            <t t-if="env.user.has_group('bes.group_ccmc_candidates')">
                <div class="o_portal_my_details">
                    <h4>Details <a role="button" href="/my/account" class="btn btn-sm btn-link"><i class="fa fa-pencil"/> Edit/View</a></h4>
                    <hr class="mt-1 mb-0"/>
                    <div t-field="user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/>
                </div>
            </t>
            <t t-else="">
                <div class="o_portal_my_details">
                    <h4>Details <a role="button" href="/my/account" class="btn btn-sm btn-link"><i class="fa fa-pencil"/> Edit</a></h4>
                    <hr class="mt-1 mb-0"/>
                    <div t-field="user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/>
                </div>
            </t>
            
        </xpath>
    

    </template> -->

    <template id="gp_exam_list_view" name="Exam List" >
       <script>

                function openTokenModal(button) {
                // Retrieve the data-id attribute value from the clicked button
                var dataId = button.getAttribute('data-id');
                // Update the content of the modal with the retrieved data
                document.getElementById('survey_input_id').value = dataId;

                }
        
       </script>


       <t t-call="portal.portal_layout">
            
            <t t-call="portal.portal_table">
                <div class="modal fade" id="examiner_token" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <form method="post" action="/my/gpexam/startexam" enctype="multipart/form-data">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Enter Examiner Token</h5>
                                </div>
                                <div class="modal-body">
                                    <!-- Modal content goes here -->
                                    <div class="container mt-5">

                                        <input type="hidden" id="survey_input_id" name="survey_input_id"/>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="examiner_token">Token</label>
                                                <input type="text" class="form-control" id="examiner_token" name="examiner_token" />
                                            </div>
                                        </div>

                                        

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary">Start Exam</button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <t t-if="error">
                    <div style="margin-top: 10px;" class="alert alert-danger" role="alert">
                        <t t-out="error" />
                    </div>
                </t>
                <thead>
                    <tr>
                        <th>Exam</th>
                        <th>Course</th>
                        <th>Subject</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="registered_exams" t-as="registered_exam">
                        <tr>
                            <td class="text-center">
                                <t t-out="registered_exam.survey_id.title" />
                            </td>
                            <td class="text-center">
                                <t t-out="registered_exam.survey_id.course.name" />
                            </td>
                            <td class="text-center">
                                <t t-out="registered_exam.survey_id.subject.name" />
                            </td>
                             <td class="text-center">
                                <t t-if="registered_exam.survey_id.exam_state == 'in_progress'">
                                    <a href="" style="margin-top: 10px; margin-bottom: 20px;" data-toggle="modal" t-attf-data-id="{{registered_exam.id}}" onclick="openTokenModal(this)" data-target="#examiner_token" class="btn btn-primary btn_cta">Start Exam</a>

                                    <!-- <a t-attf-href="/my/gpexam/startexam?id={{registered_exam.id}}" class="fa">Start Exam</a> -->
                                </t>
                                <t t-else="">

                                </t>
                            </td>
                        </tr>
                    </t>

                </tbody>
            </t>
        </t>
    </template>


    <template id="ccmc_exam_list_view" name="Exam List" >
       <script>

                function openTokenModal(button) {
                // Retrieve the data-id attribute value from the clicked button
                var dataId = button.getAttribute('data-id');
                // Update the content of the modal with the retrieved data
                document.getElementById('survey_input_id').value = dataId;

                }
        
       </script>


       <t t-call="portal.portal_layout">
            
            <t t-call="portal.portal_table">
                <div class="modal fade" id="examiner_token" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <form method="post" action="/my/ccmcexam/startexam" enctype="multipart/form-data">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Enter Examiner Token</h5>
                                </div>
                                <div class="modal-body">
                                    <!-- Modal content goes here -->
                                    <div class="container mt-5">

                                        <input type="hidden" id="survey_input_id" name="survey_input_id"/>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="examiner_token">Token</label>
                                                <input type="text" class="form-control" id="examiner_token" name="examiner_token" />
                                            </div>
                                        </div>

                                        

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary">Start Exam</button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <t t-if="error">
                    <div style="margin-top: 10px;" class="alert alert-danger" role="alert">
                        <t t-out="error" />
                    </div>
                </t>
                <thead>
                    <tr>
                        <th>Exam</th>
                        <th>Course</th>
                        <th>Subject</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="registered_exams" t-as="registered_exam">
                        <tr>
                            <td class="text-center">
                                <t t-out="registered_exam.survey_id.title" />
                            </td>
                            <td class="text-center">
                                <t t-out="registered_exam.survey_id.course.name" />
                            </td>
                            <td class="text-center">
                                <t t-out="registered_exam.survey_id.subject.name" />
                            </td>
                             <td class="text-center">
                                <t t-if="registered_exam.survey_id.exam_state == 'in_progress'">
                                    <a href="" style="margin-top: 10px; margin-bottom: 20px;" data-toggle="modal" t-attf-data-id="{{registered_exam.id}}" onclick="openTokenModal(this)" data-target="#examiner_token" class="btn btn-primary btn_cta">Start Exam</a>

                                    <!-- <a t-attf-href="/my/gpexam/startexam?id={{registered_exam.id}}" class="fa">Start Exam</a> -->
                                </t>
                                <t t-else="">

                                </t>
                            </td>
                        </tr>
                    </t>

                </tbody>
            </t>
        </t>
    </template>

    <template id="gp_exam_candidate" name="GP Exam Candidate List" >
       <script>

                function openTokenModal(button) {
                // Retrieve the data-id attribute value from the clicked button
                var dataId = button.getAttribute('data-id');
                // Update the content of the modal with the retrieved data
                document.getElementById('survey_input_id').value = dataId;

                }
        
       </script>


       <t t-call="portal.portal_layout">
            
            <t t-call="portal.portal_table">
               
                           

                                       

                                        


                <thead>
                    <tr>
                        <th class="text-center">Exam ID</th>
                        <th class="text-center">Candidate Name</th>
                        <th t-if="show_admit_card" class="text-center">Action</th>
                        <th t-if="show_certificate" class="text-center">Certificate</th>

                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="registered_exams" t-as="rec">
                        <tr>
                            <td class="text-center">
                                <t t-out="rec.exam_id" />
                            </td>
                            <td class="text-center">
                                <t t-out="rec.gp_candidate.name" />
                            </td>
                            <!-- <td class="text-center">
                                <a t-attf-href="/my/gpcandidates/download_admit_card_from_url/{{rec.id}}" class="fa">Download Admit Card</a>


                            </td> -->
                            <td t-if="show_admit_card" class="text-center">
                                <a t-attf-href="/my/gpexam/list/download_admit_card/{{rec.id}}" class="fa">Download Admit Card</a>
                            </td>

                            <td t-if="show_certificate" class="text-center">
                                <t t-if="exam_region != 'CHENNAI' and exam_region != 'KOLKATTA'">
                                    <a t-attf-href="/my/gpexam/list/download_certificate/{{rec.id}}" class="fa">Download Certificate</a>
                                </t>
                                <t t-if="institute_code == 'K01' or institute_code == 'K02' or institute_code == 'K09'">
                                    <a t-attf-href="/my/gpexam/list/download_certificate/{{rec.id}}" class="fa">Download Certificate</a>
                                </t>

                            </td>
                             
                        </tr>
                    </t>

                </tbody>
            </t>
        </t>
    </template>


    <template id="ccmc_exam_candidate" name="CCMC Exam Candidate List" >
       <script>

                function openTokenModal(button) {
                // Retrieve the data-id attribute value from the clicked button
                var dataId = button.getAttribute('data-id');
                // Update the content of the modal with the retrieved data
                document.getElementById('survey_input_id').value = dataId;

                }
        
       </script>


       <t t-call="portal.portal_layout">
            
            <t t-call="portal.portal_table">
               
                           

                                       

                                        


                <thead>
                    <tr>
                        <th class="text-center">Exam ID</th>
                        <th class="text-center">Candidate Name</th>
                        <th t-if="show_admit_card" class="text-center">Action</th>
                        <th t-if="show_certificate" class="text-center">Certificate</th>

                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="registered_exams" t-as="rec">
                        <tr>
                            <td class="text-center">
                                <t t-out="rec.exam_id" />
                            </td>
                            <td class="text-center">
                                <t t-out="rec.ccmc_candidate.name" />
                            </td>
                            <!-- <td class="text-center">
                                <a t-attf-href="/my/gpcandidates/download_admit_card_from_url/{{rec.id}}" class="fa">Download Admit Card</a>


                            </td> -->
                            <td t-if="show_admit_card" class="text-center">
                                <a t-attf-href="/my/ccmcexam/list/download_admit_card/{{rec.id}}" class="fa">Download Admit Card</a>
                            </td>

                            <td t-if="show_certificate" class="text-center">
                                <a t-attf-href="/my/ccmcexam/list/download_certificate/{{rec.id}}" class="fa">Download Certificate</a>
                            </td>
                             
                        </tr>
                    </t>

                </tbody>
            </t>
        </t>
    </template>

   


</odoo>
