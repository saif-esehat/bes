<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <report
        id="reports_iv_written_attendance"
        string="IV Written Attendance Sheet"
        model="iv.attendance.sheet"
        report_type="qweb-pdf"
        name="bes.reports_iv_written_attendance_sheet1"
        file="bes.reports_iv_written_attendance_sheet1"
    />

    <report
    id="action_report_iv_attendance_sheet"
    model="iv.attendance.sheet"
    string="IV Written Roll No Sheet"
    report_type="qweb-pdf"
    name="bes.report_iv_attendance_sheet"
    file="bes.report_iv_attendance_sheet"
    print_report_name="IV Attendance Sheet"/>

    <template id="reports_iv_written_attendance_sheet1">
    <t t-call="web.basic_layout">
            <!-- <div class="page"> -->
            <div class="header">
                <table style="width: 100%; table-layout: fixed; border-collapse: collapse;">
                    <tr>
                        <th colspan="2" style="border: 1px solid black; padding:10px; text-align:center; vertical-align: middle;">
                            <img class="img img-responsive img-top" src="/bes/static/src/img/logo_bes.jpg"
                                 style="max-width: 100px; max-height: 80px;padding:2px;" />
                        </th>
                        <th colspan="6" style="border: 1px solid black; padding:10px; text-align:center; vertical-align: middle;">
                            <strong>Board of Examinations for Seafarers Trust</strong>
                        </th>
                        <th colspan="2" style="border: 1px solid black; padding:10px; text-align:center; vertical-align: middle;">
                            <div style="text-align: left;">
                                <span style="display:block; font-size:10px;">FORMAT- IV- 04</span>
                                <span style="display:block; font-size:10px;">DATE: </span>
                                <span style="display:block; font-size:10px;">REV No.: 0</span>
                            </div>
                        </th>
                    </tr>
                 
                    <tr>
                        <th colspan="10" style="border: 1px solid black; padding:10px; text-align:center; vertical-align: middle;">
                            <strong>Written Attendance Sheet - IV Exam (MMB) </strong>
                        </th>
                      
                    </tr>
                    <tr >
                        <th colspan="8" style="border: 1px solid black; padding:10px; text-align:left; vertical-align: middle;">
                            <strong>Venue : Public Education Society Central School</strong>
                        </th>
                        <th colspan="2" style="border: 1px solid black; padding:10px; text-align:left; vertical-align: middle;">
                            <strong>Class No :  </strong>
                        </th>
                    </tr>
                 
                   
               
                </table>
                </div>

            <!-- <t t-foreach="range(total_pages)" t-as="page">
                <t t-set="start_index" t-value="page_splits[page]['start']" />
                <t t-set="end_index" t-value="page_splits[page]['end']" /> -->

                <table class="table table-condensed" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 4%;vertical-align: middle;">Sr No.</th>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 4%;vertical-align: middle;">Indos No.</th>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 15%;vertical-align: middle;">Roll No.</th>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 17%;vertical-align: middle;">Grade Applied</th>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 25%;vertical-align: middle;">Name of Candidate</th>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 10%;vertical-align: middle;">DOB</th>
                            <th colspan="1" style="border: 1px solid black; padding: 8px; text-align: center; width: 15%;vertical-align: middle;">Sign</th>
                        </tr>
                    </thead>
                    <tbody>
<<<<<<< HEAD
                        <t t-set="record_index" t-value="1" />
                        <!-- Display records for the current page based on start and end indices -->
                        <t t-foreach="docs[start_index:end_index]" t-as="attendance">
=======
                        <t t-set="index" t-value="0" />
                        <t t-foreach="docs" t-as="attendance">
                            <t t-set="index" t-value="index + 1" />
>>>>>>> 11a8a8c3eeb6049b06bc34a542983dca753f81d7
                            <tr>
                                <td colspan="1" style="border: 1px solid black; padding:6px; text-align: center;">
                                    <t t-esc="record_index" />
                                </td>
                                <td colspan="1" style="border: 1px solid black; padding:6px;text-align: center;">
                                    <span t-field="attendance.indos_no" />
                                </td>
                                <td colspan="1" style="border: 1px solid black; padding:6px;text-align: center;">
                                    <span t-field="attendance.roll_no" />
                                </td>
                                <td colspan="1" style="border: 1px solid black; padding:6px;text-align: center;">
                                    <span t-field="attendance.grade_applied" />
                                </td>
                                <td colspan="1" style="border: 1px solid black; padding:6px;text-align: left;">
                                    <span t-field="attendance.candidate_name" />
                                </td>
                                <td colspan="1" style="border: 1px solid black; padding:6px;text-align: center;">
                                    <span t-esc="attendance.dob.strftime('%d-%m-%Y')" />
                                </td>
                                <td colspan="1" style="border: 1px solid black; padding:6px;"></td>
                            </tr>
                            <!-- <t t-set="record_index" t-value="record_index + 1" /> -->
                        </t>
                    </tbody>
                </table>

                <!-- <t t-if="page &lt; total_pages - 1">
                    <div style="page-break-before: always;"></div>
                </t> -->
            <!-- </t> -->


            <div style="page-break-inside: avoid; margin-top: 20px;">
                <div class="footer" style="width: 100%; font-size: 12px;">
                    <table style="width: 100%; table-layout: fixed; border-collapse: collapse;">
                        <tr style="height: 50px;">
                            <td style="font-size: 18px; text-align: left; vertical-align: bottom; padding-right: 50px;">
                                <b>Name of Invigilator:</b>
                            </td>
                            <td style="font-size: 18px; text-align: right; vertical-align: bottom;">
                                <b>Signature of Invigilator:</b>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" style="text-align: center; font-size: 14px; padding-top: 10px;">
                                page <span class="page"></span>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>






                    
    </t>
   

</template>

<template id="report_iv_attendance_sheet">
    <t t-call="web.basic_layout">  <!-- This ensures the base structure is used -->
        <t t-set="doc_ids" t-value="doc_ids"/>
        <t t-set="docs" t-value="docs"/>
        
        <table class="table" style="width: 100%; border-collapse: collapse; border: none; font-size: 20px;"> <!-- Increased font size -->
            <tbody>
                <t t-set="counter" t-value="0"/>
                <tr>
                    <t t-foreach="docs" t-as="doc">
                        <!-- Print the roll_no in red and without borders -->
                        <td style="color: red; border: none; padding: 10px;"> <!-- Padding for spacing -->
                            <t t-esc="doc.roll_no"/>
                        </td>
                        
                        <!-- Increment counter and check if 3 records have been printed -->
                        <t t-set="counter" t-value="counter + 1"/>
                        
                        <!-- If counter is divisible by 3, close the row and start a new one -->
                        <t t-if="counter % 3 == 0">
                            <tr>
                            <t t-if="counter % 3 == 0">
                                <!-- Insert a page break after every 8 rows -->
                                <tr><td colspan="3" style="height: 30px; border: none;"></td></tr> <!-- Increased height -->
                                <tr><td colspan="3" style="border: none; page-break-after: always;"></td></tr> <!-- Page break -->
                            </t>
                            </tr>
                        </t>
                    </t>
                </tr>
            </tbody>
        </table>
    </t>
</template>



</odoo>
